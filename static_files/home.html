<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>HOME</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="home.css">

    <!-- JQuery -->
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src=" https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script src="jquery-3.3.1.min.js"></script>

    <script type="text/javascript">
        $(document).ready(() => {
            $('#readButton').click(() => {
                const requestURL = 'website/' + $('#nameBox').val();
                console.log('making ajax request to:', requestURL);

                // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
                $.ajax({
                    // all URLs are relative to http://localhost:3000/
                    url: requestURL,
                    type: 'GET',
                    dataType: 'json',
                    success: (data) => {
                        console.log('You received some data!', data);
                            $('#status').html('Successfully fetched data at URL: ' + requestURL);
                            $('#timeStart').html('Time Started: ' + data.timeStart);
                            $('#timeEnd').html('Time End: ' + data.timeEnd);
                            $('#duration').html('Duration: ' + data.duration);
                    },
                });
            });

            // http://api.jquery.com/ajaxerror/
            $(document).ajaxError(() => {
                $('#status').html('Error: unknown ajaxError!');
            });
        });
    </script>
</head>

<body>
    <h1> Today's Websites Usage</h1>

     Website to Look Up:
    <input id="nameBox" type="text" size="20" />
    <button id="readButton">Get Recent Info</button>
    
    <div id="timeStart"></div>
    <div id="timeEnd"></div>
    <div id="duration"></div>

    <!--where is the output
    <div class="container">
        <div class="row">

                Pick up a date:
                <input type="date" name="bday" id="date">
                <button id="submit">submit</button>

                <script>
                 $(document).ready(function(){
                     console.log("yoyoyoyo");
                     $("#submit").click(function(){
                         console.log("lolololo");
                         console.log($("#date").val());
                     });
                 });

                </script>
        </div>
    </div>-->

    <!-- Insert coresponding data here -->
    <div id="selected-data"></div>

    <div class="useraccount">
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                <span class="glyphicon glyphicon-user"></span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li>
                    <a href="settings.html">Settings</a>
                </li>
                <li>
                    <a href="login.html">LogOut</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="datacontent">

        <div id="timeline" style="height: 300px;"></div>
        <canvas id="pieChart"></canvas>
    </div>



    <script type="text/javascript">
     google.charts.load('current', {'packages':['timeline']});
     google.charts.setOnLoadCallback(drawChart);
     function drawChart() {
         var container = document.getElementById('timeline');
         var chart = new google.visualization.Timeline(container);
         var dataTable = new google.visualization.DataTable();

         dataTable.addColumn({ type: 'string', id: 'President' });
         dataTable.addColumn({ type: 'string', id: 'Text' });
         dataTable.addColumn({ type: 'date', id: 'Start' });
         dataTable.addColumn({ type: 'date', id: 'End' });

         dataTable.addRows([
             [ 'Facebook', '', new Date(0,0,0,12,0,0),  new Date(0,0,0,13,30,0) ],
             [ 'Facebook', '', new Date(0,0,0,14,0,0),  new Date(0,0,0,15,30,0) ],
             [ 'Google',  '', new Date(0,0,0,16,45,0),  new Date(0,0,0,17,30,0) ],
             [ 'Amazon',  '', new Date(0,0,0,13,30,0), new Date(0,0,0,14,0,0) ],
             [ 'Amazon',  '', new Date(0,0,0,15,30,0), new Date(0,0,0,16,45,0) ],
             [ 'Triton Ed', '', new Date(0,0,0,17,30,0), new Date(0,0,0,18,0,0) ],
             [ 'Calendar Tasks', 'Study Time', new Date(0,0,0,12,0,0), new Date(0,0,0,14,0,0)],
             [ 'Calendar Tasks', 'Cram Time', new Date(0,0,0,16,0,0), new Date(0,0,0,18,0,0)]]);

         var options = {
             allowHTML: true,
             timeline: { colorByRowLabel: true },
             'width':  1000,
             'height': 1000,
         };

         chart.draw(dataTable);
     }
    </script>

    <!--
    <script>
     console.log("hello");

     const requestURL = 'users/' + localStorage.getItem("username");
     console.log('making ajax request to:', requestURL);

     $.ajax({
         // all URLs are relative to http://localhost:3000/
         url: requestURL,
         type: 'GET',
         dataType: 'json',
         success: (data) => {
             console.log('You received some data!', data);
             $('#socialMed').html('Total Social Media: ' + data.socialMedia);
             $('#onlineT').html('Total Online TV: ' + data.onlineTV);
             $('#edu').html('Total Education: ' + data.education);
             $('#oth').html('Total Other: ' + data.other);

         },
     }); //ajax match

     //pie
     var ctxP = document.getElementById("pieChart").getContext('2d');
     var myPieChart = new Chart(ctxP, {
         type: 'pie',
         data: {
             labels: ["Social Media", "Online TV", "Education", "Other"],
             datasets: [{
                 data: [300, 100, 40, 120],
                 backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C", "#949FB1"],
                 hoverBackgroundColor: ["#FF5A5E", "#5AD3D1", "#FFC870", "#A8B3C5"]
             }]
         },
         options: {
             responsive: true
         }
     });

     $("#pieChart").click(
         function (evt) {
             var activePoints = myPieChart.getElementsAtEvent(evt);
             clickindex = activePoints[0]["_index"];

             if (clickindex == 0) {
                 location.href = "socialmedia.html";
             } else if (clickindex == 1) {
                 location.href = "onlinetv.html";
             } else if (clickindex == 2) {
                 location.href = "education.html";
             } else if (clickindex == 3) {
                 location.href = "other.html";
             }

             //var url = "http://example.com/?label=" + activePoints[0].label + "&value=" + activePoints[0].value;
             //alert(url);
         }
     );
    </script>

    <div id="socialMed"></div>
    <div id="onlineT"></div>
    <div id="edu"></div>
    <div id="oth"></div>-->

    <div>
        
    </div>

</body>

</html>
